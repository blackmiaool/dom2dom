function t(t,e){return Math.sqrt(t*t+e*e)}function e(t){var e=t.getBoundingClientRect();return e.x+=e.width/2,e.y+=e.height/2,e}function i(t,e,i){t.x+=e*Math.cos(i),t.y+=e*Math.sin(i)}var o=function(t){void 0===t&&(t={});var e=t.from,i=t.to;this.arrowOptions=Object.assign({strokeStyle:"#555",lineWidth:3},t.arrowOptions);var o=document.createElement("canvas");document.body.appendChild(o),o.style="position:fixed;left:0;right:0;top:0;bottom:0;height:100%;width:100%;pointer-events:none;",o.height=document.documentElement.offsetHeight,o.width=document.documentElement.offsetWidth;var n=o.getContext("2d");this.from=e,this.to=i,this.canvas=o,this.ctx=n,this.update()};o.prototype.destroy=function(){this.destroyed||(document.body.removeChild(this.canvas),this.destroyed=!0)},o.prototype.update=function(){this.destroyed||(this.draw(),requestAnimationFrame(this.update.bind(this)))},o.prototype.draw=function(){var t=this.canvas,i=this.ctx,o={from:e(this.from),to:e(this.to)};JSON.stringify(this.preArrowRect)!==JSON.stringify(o)&&(t.height=document.documentElement.offsetHeight,t.width=document.documentElement.offsetWidth,i.clearRect(0,0,t.width,t.height),this.drawArrow(o),this.preArrowRect=o)},o.prototype.drawArrow=function(e){var o,n,a=e.from,h=this.ctx,r=20;o=JSON.parse(JSON.stringify(e.to)),n=JSON.parse(JSON.stringify(a));var s,d,c,u=Math.atan2(o.y-n.y,o.x-n.x),f=Math.tan(u),m=Math.sin(u),l=Math.cos(u);i(n,Math.min((d=n.height/2,c=Math.abs(r/f*m),Math.abs(r/f*((c+d)/c))),function(){var t=n.height/2,e=n.width/2,i=t/Math.abs(l);return t*((e+Math.abs(m*i))/i)}(),(s=Math.abs(r*f*l),Math.abs(r*f*((s+a.width/2)/s)))),u),i(o,function(){var t=o.height/2,e=o.width/2,i=[Math.atan2(t,e),Math.atan2(t,-e),Math.atan2(-t,-e),Math.atan2(-t,e)];return u>=i[0]&&u<i[1]||u>=i[2]&&u<i[3]?Math.abs(t/m):Math.abs(e/l)}(),Math.PI+u),h.strokeStyle=this.arrowOptions.strokeStyle,h.translate(o.x,o.y),h.rotate(Math.PI+u),h.beginPath(),h.lineWidth=this.arrowOptions.lineWidth;var p=t(o.x-n.x,o.y-n.y);h.moveTo(0,0),h.lineTo(30,20),h.lineTo(25,5),h.moveTo(25,-5),h.lineTo(30,-20),h.lineTo(0,0),h.lineTo(30,20),h.stroke(),h.beginPath(),h.moveTo(25,5),h.lineTo(p,r),h.lineTo(p,-r),h.lineTo(25,-5),h.stroke()};export default o;export{t as squareSumSqrt,e as getBoundingRect,i as makeBias};
//# sourceMappingURL=dom2dom.m.js.map
